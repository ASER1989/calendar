<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta name="viewport"
          content="width=device-width, initial-scale=1,maximum-scale=1,maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>收支分析</title>
    <link rel="stylesheet" href="css/analysis.css">
    <link rel="stylesheet" href="css/mobiscroll-2.13.2.full.min.css">
</head>
<body>
<header>
    <h2 id="_header_year">
        2017年12月
    </h2>
    <div  style="opacity: 0">

        <select name="" id="_header_week">
            <option value="1">第一周</option>
            <option value="2">第二周</option>
            <option value="3">第三周</option>
            <option value="4">第四周</option>
        </select>
    </div>
</header>
<section id="analysis-box" class="analysis">

</section>
<script src="js/lib/me.require.js"></script>
<script type="text/javascript">
   
    require([
//            './js/lib/zepto.js',
            './js/jquery.1.7.2.min.js',
            './js/lib/mobiscroll-2.13.2.full.min.js',
            './js/lib/zoom.js',
            './js/lib/echarts.min.js'],
        function () {
            require('./js/lib/mobiscroll-2.13.2.full.min.js', function () {
                var pagezoom = new zoom($);
                pagezoom.calc(function () {
                    function ready() {
                        var currYear = (new Date()).getFullYear();
                        var opt = {};
                        opt.date = {preset: 'date'};
                        opt.default = {
                            theme: 'android-ics light', //皮肤样式
                            display: 'modal', //显示方式
                            mode: 'scroller', //日期选择模式
                            dateFormat: 'yy年mm月',
                            lang: 'zh',
                            showNow: false,
                            showLabel: false,
                            setText: '确定',
                            cancelText: '取消',
                            onBeforeShow: function (inst) {
                                inst.settings.wheels[0].length > 2 ? inst.settings.wheels[0].pop() : null;
                            },
                            startYear: currYear - 10, //开始年份
                            endYear: currYear + 10 //结束年份
//                    , headerText: function (valueText) { //自定义弹出框头部格式
//                        array = valueText.split('年');
//                        return array[0] + "年" + array[1];
//                    }
                        };

                        $("#_header_year").mobiscroll().date(opt.default);
//                    $("#_header_week").mobiscroll().select(week);
                        $('#_header_week').mobiscroll().select({
                            theme: 'android-ics light',
                            display: 'bottom',
                            minWidth: 200,
                            setText: '确定',
                            cancelText: '取消'
                        });
                    };
                    ready();

                    var myChart = echarts.init(document.getElementById('analysis-box'));

                    // 指定图表的配置项和数据
                    var option = {
                        title: {
                            text: '收支分析'
                        },
                        tooltip: {},
                        legend: {
                            data: ['金额']
                        },
                        xAxis: {
                            data: ["餐饮", "购物", "日用", "通讯", "娱乐", "零食"]
                        },
                        yAxis: {},
                        series: [{
                            name: '开销',
                            type: 'bar',
                            data: [535, 2000, 363, 300, 1600, 600]
                        }]
                    };

                    // 使用刚指定的配置项和数据显示图表。
                    myChart.setOption(option);
                });
                $(window).on('resize', pagezoom.calc);
            });

        });
</script>
</body>
</html>
